\documentclass[12pt]{article}
\begin{document}
\section*{Purpose}
The purpose of the create id procedure is to produce
a relatively small abstract of a parameter set object
for the purpose of identifying the parameter set object.
Its input is a parameter set object.
The output is the text representation of the abstract.
For efficiency reasons, availing a text representation
of the parameter set object and then abstracting that
is {\em not} recommended.

\section*{The external user visible procedure}
The only input argument is the value for which the id is to be created,
the value must not be modified inside this set of procedures.

\begin{enumerate}
\item Create a SHA1 digest object, refered to herein as the destination

\item Append a `\verb+{+' to the destination

\item Avail the keys of parameter set or table, and sort the keys into 
      ascending ASCII collating order

\item For each sorted key and associated value pair in the parameter set
      or table:

  \begin{enumerate}
  \item Append the key to the destination
  \item Append a `\verb+:+' to the destination
  \item Invoke the internal procedure with the following inputs:
    \begin{enumerate}
    \item the value object of the associated key
    \item the destination
    \item the trailing mark with the value of a zero length string
    \end{enumerate}
  \end{enumerate}

\item Append a `\verb+}+' to the destination

\item Returns the string value of the destination's digest of its inputs, 
      unless an error indication has occured, in which case, provide an
      appropriate exception or error code instead
\end{enumerate}

\section*{The internal procedure}

Depending on the value type of the input object, the corresponding sub-precedure is 
invoked,

\subsection*{Atom}
\begin{enumerate}
\item Append `\verb+"+' to the destination
\item Translate the atom text into it's canonical printing format, refered to
      as text. For the details of the canonical printing format, please refer to the 
      corresponding document.
\item For each character in the text: if the character is a `\verb+"+',
      append `\verb+\"+' to the destination; or if the character is a
      `\verb+\+', append `\verb+\\+' to the destination; otherwise append 
      the character to the destination
\item Append `\verb+"+' and the marker to the destination
\end{enumerate}

\subsection*{Sequence}
\begin{enumerate}
\item Append `\verb+[+' to the destination
\item For each item in the sequence: invoke the internal procedure
      with the item, destination, and if this is the last item of the 
      sequence, then a zero length string; otherwise `\verb+,+'
\item Append `\verb+]+' and the mark to the destination
\end{enumerate}

\subsection*{Parameter Set or Table}
\begin{enumerate}
\item Invoke the external procedure with the value object
\item Append the string value returned from the external procedure, and the mark to the
      destination
\end{enumerate}
\end{document}
